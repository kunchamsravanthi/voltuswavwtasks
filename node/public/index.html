<!DOCTYPE html>
<html>

<head>
    <title>Convert JSON Data to HTML Table</title>
    <style>
        th,
        td,
        p,
        input {
            font: 14px Verdana;
        }

        table,
        th,
        td {
            border: solid 1px #DDD;
            border-collapse: collapse;
            padding: 2px 3px;
            text-align: center;
        }

        th {
            font-weight: bold;
        }
    </style>
    <!-- <script>
      function setup(){
      var data = {};
                data.title = "title";
                data.message = "message";
                data.firstname = $('#fname').val()
                data.lastname = $('#lname').val()
                data.email = $('#emailid').val()
                data.password = $('#pass').val()

                $.ajax({
                    type: 'POST',
                    data: JSON.stringify(data),
                    contentType: 'application/json',
                    url: 'http://localhost:4041/users',
                    success: function (res) {
                        console.log('success');
                        console.log(JSON.stringify(res));
                      
                    }
                });
              };
          </script> -->
</head>

<body>

    <div id="tablelist">
        <table id="tbl1">
            <tr>
                <th>firstname</th>
                <th>lastname</th>
                <th>email</th>
                <th>password</th>
            </tr>
        </table>
    </div>
    <!-- <% for(var i=0; i < res; i++) { %>
   <tr>
     <td><%= res[i].firstname %></td>
     <td><%= res[i].lastname%></td>
     <td><%= res[i].emailid %></td>
     <td><%= res[i].password %></td>
   </tr>
<% } %> -->

    <script>
        var data = {};
        data.title = "title";
        data.message = "message";
        data.firstname = $('#fname').val()
        data.lastname = $('#lname').val()
        data.email = $('#emailid').val()
        data.password = $('#pass').val()
        $.ajax({
            type: 'POST',
            data: JSON.stringify(data),
            contentType: 'application/json',
            url: 'http://localhost:4041/userslist',
            success: function (res) {
                console.log('success');
                // document.write("#register" ,style="display:hidden;")
                // document.write("#tablelist" ,style="display:block;")
                console.log(JSON.stringify(res));


                // $(document).ready(function () {
                //     $.getJSON("/userslist", function (data) {
                //         console.log(data)
                //         // var e_data='';
                $.each(data, function (req, value) {
                    // e_data+='<tr>';
                    // e_data+='<td>'+req.firstname+'</td>'
                    // e_data+='<td>'+req.lastname+'</td>'
                    // e_data+='<td>'+req.email+'</td>'
                    // e_data+='<td>'+req.password+'</td>'
                    // var row = $(document.createElement('tr'));
                    // var fname = $(document.createElement('td'));
                    // var lname = $(document.createElement('td'));
                    // var emailid = $(document.createElement('td'));
                    // var pswd = $(document.createElement('td'));
                    // fname.innerHTML = req.firstname
                    // lname.innerHTML = req.lastname
                    // emailid.innerHTML = req.emailid
                    // pswd.innerHTML = req.password
                    // row.append('fname')
                    // row.append('lname')
                    // row.append('emailid')
                    // row.append('pswd')
                    // $('#tbl1').append('row')
                    $('#tbl1').append(`<tr><td>${value.firstname}</td><td>${value.lastname}</td><td>${value.emailid}</td><td>${value.password}</td></tr>`)
                })


            }
        })
    </script>

</body>

</html>